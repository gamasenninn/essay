#  近況報告 -  炎上するジャングルでの生存術  ER図という魔法陣  
  
もし君が、そこそこ優秀なプログラマー、
もしくはコードを書くのに十分なプログラマーだったとしよう  

たぶん、遅かれ早かれ  
レンジャーの落下傘部隊よろしく  
燃え盛るジャングルへの降下命令が下るだろう  
所謂、炎上案件へのアサインというやつだ  

ここが、今後ITで生存できるかどうかの瀬戸際だ  
炎上案件の中で、君ならどう行動し、どう切り抜けるだろうか  
燃え尽きてしまうか、生き残るかは君次第だ  

案件によって状況は全く異なるので
方法論は無限にあるだろう  

生き残った勇者たちのアドバイスを聞くのもよい  
あるいは、燃え尽きた勇者の失敗談を参考にするのもよい  

多かれ少なかれ炎上案件の特徴としては、
仕様書がなく、  
あったとしても最新ではなくあてにならない  
APIも何がしたいのかよくわからなし  
DB構造がまったくわからない  
・・・こんな感じではなかろうか？

それでは今日は、  
ワシから一つだけアドバイスをしておこう  

システムの血液はデータだが、
そのデータの中心である心臓部はなんだろう？
そのとおり
データベース(DB)である  

DB構造を理解することが一番なのだ    
DB構造を理解することで  
API層もView層も理解できるのだ  

そのために
まずはこの心臓部がどうなっているのか、
データの地図を描いてみよう  

それがER図だ
テーブル、データ項目の実体（エンティティ）と
その関連づけであるリレーション  
それを図面にする  
たったこれだけだ  

ER図はとてもシンプルであるが  
そのDBの構造を一枚の地図として俯瞰できるので  
データ構造が一目でわかるのだ  

今日日のの開発ではクラス図を書くのが定石かもしれない  
しかし、炎上案件では  
新規にクラス図を書き起こすのには時間がかかりすぎる  
プログラムコードを追って  
クラスの振る舞いを理解していく時間がなんてとれないだろう 
その部分はプログラムコードを直接追ったほうが効率がよかったりする  

クラス図とは違い
ER図ならデータベースだけに視点を集中できる  

ER図は、もちろんあとから来た助っ人に  
DB構造を説明するために  
とても重要な図面であるが、
資料的価値以前に  
実は、描くことに意味があるものなのだ  
  
自動でER図を書いてくれる
A5:SQLなどのように優秀なツールも多く存在する
それを使うのもいいだろう  
だが、一つ一つのテーブル、データ項目を手で掬い上げ  
テーブルとキーとのリレーションを明確にしていく  
その作業が実は重要なのだ  
その過程で君の頭脳が整理され、
突然、データ構造がわかるのである  
東大受験生の合格者たちの共通点が  
自習ノートがきれいでわかりやすい  
というあれと同じだと思う  
この作業にそんなに時間はかからない  
多くても一日ぐらいあれば十分だろう  

こんなことは一部の人間しか言わないかもしれない  
今どきの魔法使いは言わないかもしれない  
だが、炎上案件だからこそ  
一度立ち止まって現状を把握するためにも  
ER図を描くことが必要なのだ    

描くにあたっては、注意点はあまりない  
ER図におけるリレーションは概念的であってよい  
実際にリレーションを設定されなくてもよい  
データの名前が明確になり、概念的なつながりがわかればよい  
自分のためだけに描けばよい  

だまされたと思って  
一度やってみるとよい  

これを描くための道具はたくさんある    
ワシのおすすめとしては、draw.ioあたりがよいだろう   
ブラウザベースで描けるし、githubとの連携が可能だ  
もちろん、Googleドライブにも保存できる  
VSCodeの拡張機能でdraw.ioプラグインを呼び込んでもよいだろう    
そうすれば使い慣れたVSCode上でサクサクと図が描ける  
また、draw.ioはER図以外にクラス図もネットワーク図も  
およそITで必要とされている図を自由自在に描くことができる    

描いたER図は  
印刷して目の前に貼っておくのがよい  
ぜひともそうしてくれ  

これこそが、
君が書いた魔法陣なのだ

その効き目はすごい  
データはまるで血液のように  
流れ、躍動、温度を持つだろう    
実際の魔法陣のように  
ありとあらゆる  
SQLコード、ORMコードが  
君の頭の中に召喚されるはずである  

では、君たちの武運を祈る  
