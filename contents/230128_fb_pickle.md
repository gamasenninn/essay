# 近況報告 － Webの自動化でCAPTCHAにどう対応するか  

Webからのデータ自動収集をしていると  
突然の仕様変更があり、ビビってしまう・・・・  
ということがよくあるのは以前話をしたとおりだ  

今回のビビリ案件は  
突然CAPTCHAで文字認証が入ってしまった件  
へんてこな謎文字がでて、これなあんだ？と聞かれ  
その文字を入力しないと先にすすめん、というやつ  
自動化していると、ここでストップしてしまい次にすすめない  

こんなときはどうする？  
CAPTCHAを突破する有料のAPIサービスも存在するが  
なんかそれを使ったら負け、みたいでくやしい  
なので、ちょっと対策を考えてみた  

結局CAPTCHA認証を終えたあとのcookieを保存して、
目的のURLを叩いたあとに
そのcookieを読み込むようにすればよいのではないか  

実験をしたらうまくいった  

では、どうやってcookieを保存するか？  
CAPTCHA画面を単体で表示するプログラムを書いて  
プログラム中でコマンドとして  
入力とcookie保存をすればよい  
まあ、ここんとこのギミックが、  
今回紹介する有料級のアイディアね  
（手品のタネあかしみたいな感じね）

写真に簡単なサンプルを示しめしておく

cookieを保存してしまえば  
あとは好きなときに好きなタイミングで  
セッションに反映すればよいので  
案外使い勝手はよい  

cookieの有効期限が過ぎたら  
また新たにcookieを保存すればよい  
その部分はもちろん手作業になるが  
まあ、それはご愛嬌  
完全な自動化というわけにはいかないが  
一週間に一回ぐらいの手動入力なら  
運用で十分にカバーできる範囲だ  

