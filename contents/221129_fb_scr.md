### ___スクレイピングは職人芸の時代が来た ___
いつもデータを参照するサイトのHTMLの構造が  
また変わってしまった  
  
たぶんSPAのフレームワークに変えたんだろうけど   
CLASS定義が動的になったことにより  
いままでのスクレイピング術式が  
全部無効になってしまった  

つまりはselectorを使ってDOMを検索する手法は使えない  
xpathでやるしかない  
抽象的すぎてデバッグがし難くなる  
//*[@id="__hoge"]/div[1]/div/fuga/div/div/  
みたいに  
ぱっと見でどのエレメントか判定するのが難しい  

selectorで抽象化したほうが楽なはずで  
ユニットテストを書くときなんかも  
作成者側は苦労するはずなんじゃが  
あえて動的にCSSを変化させている  
  
HTMLのテキスト部分を検索して  
DOMのスタートを決定  
インデックスを割り出して最小のxpathでテキストを拾う  
なんて超面倒な術式でやるなら  
なんとか多少はデバッグしやすくなるかもしれない    

さあて、どうするか、ちょっと思案のしどころだ  
メインのワークフローに組み込まれたロジックなので  
あしたでいいやとはならない  
今やらんといけないのじゃ  
だから、こういったものは外注化できない  
まるで請求書や納品書の金額を修正するぐらいの感覚で  
プログラムを修正できないとならない  

というわけで  
SPA時代のスクレイピングは  
素人の領域ではなく   
職人芸の部類になってきたと思える    　
***
