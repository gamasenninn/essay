
# 近況報告

最近、pythonでのバックエンド開発はfastAPIを中心に展開している  
つうか、もうfastAPIしか使いたくない  
  
Flaskの上位互換のようなバックエンドのフレームワークで  
軽量で、非同期によるパフォーマンスが抜群！  
その他、開発者にとって涙ものの機能が満載なのだ  
  
あらかじめswaggerが搭載されているので  
API仕様を自動で作成してくれる  
しかも、その上でテストができてしまう  
仕様を書くのが面倒なワシには神機能である  
ブラウザでOpenAPIの画面を見た瞬間  
しっこちびりそうだった  
  
DB接続はsqlalchemyを使うのが定石なので、  
DBを直接触らずにモデルの作成が簡単にできるし  
有名なRDBMSはほとんどサポートされているので  
ORMでラップしてしまえば  
コードはほとんど変更しなくて別DBに対応できる  
まあ、これはsqlalchemyを使っていれば当然だね  
最近はORMばかりなのでSQL文、忘れてしまったよ  
  
MigrationはAlembicを使用する  
モデルの動的変更でDBへの反映がいとも簡単にできるので  
あとからDB項目が追加、削除されても  
「DB簡単にいじんなよ、ころ..！！」  
なんて、怒ることなく「かしこまあ❤」  
と淡々と変更作業ができる  
  
スキーマの展開はPydanticを使うことで、  
カラム名の変換などや  
バリデーションに極めて柔軟に対応できる  
だからDB項目の標準命名規約によるスネークケースでのカラム名も  
フロントエンドへのキャメルケースの自動変換が  
たった一行でできてしまう  
  
DBからDBへのデータ移行なども  
Pydanticのエイリアス機能をうまく使うと  
モデルとスキーマを機械的に定義するコードと  
あとは数行の変換コードだけで  
めちゃ美しい変換処理が書けてしまう  
思わずうっとりコードを眺めてしまうほどである  
  
テストにはTestClientを使うと  
あらあ、びっくり!!  
わざわざテスト用サーバーを起動しなくても  
pytest上でAPIテストができてしまう  
しかもテストのパフォーマンスは爆速!!  
これをCI/CDパイプラインに乗せてしまえば  
実に軽いテストコンテナになる  
  
おかげで  
テストの待ち時間にタバコ吸えなくなってしまった  
まあ、そういうわけで  
fastAPIはこのように涙なくしては語れない  
一日中語っても語りきれないぐらいだ  