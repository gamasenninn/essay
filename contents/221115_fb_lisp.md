近況報告 -　はじめに言葉=リストありき、光=evalあれと神はいった

LISPという古代語がある  
FORTRANの次に古く
最古の言語の一つである

神の言語  
悟りの言語  

などとも言われ
これを使う機会はほとんどなくなったが  
いまでも熱狂的な信徒(Lisper)がいる  

Lisperは、
自分たちが信徒であることを宣言しない  
普段はLispを使うことはない  
使う場面があまりないからだ  

だが、  
魔法使いの弟子（プログラマー見習い）たちよ  
Lisperにならなくても  
一度はこの言語に触れておくとよいだろう  

この古代語は次のように生まれた 

カオスの宇宙では、データだけが存在した   
はじめにリストがあった  
神は「カー(car)」と言った  
するとリストの一番最初の言葉を引き出すことができた  
次に、「クダー(cdr)」と言った  
するとリストの残りを引き出すことができた  
引き出す作業が最後の一つになると、  
それを「atom」と言い真とした  
2つのアトムを並べ同じであるなら「eq」といい真とした  
2つのアトムを連結し「コンス(cons)」といった  
この5つの次に、  
「コンド(cond)」判定    
「クオート(quote)」そのまま    
「ラムダ(lambda)」名も無い関数    
「デファイン(define)」定義    
といった  
そして、この言葉たちは「イバル(eval)」評価を生んだ  
evalは自分自身を呼び出すことができた  
これによって無限に言葉を生み出ことができるようになった    

さらにマクロという  
形を定義する力を得て    
いかようにもルール（構文）を創造し、変化させることができた  
  
これが原初のLISPであった  
LISPは概念である  
最初はLISPそのものの実装はなかったが  
この教えにより  
信徒たち（Lisper）は
自分なりのLISPを実装することができた  
これをLISP方言という  

さまざまな派閥が生まれたが  
大まかには二代派閥に分かれた  
Common LISP  
Scheme  
これらはいまでも残っているし  
いまもLisperたちは使っている  

だが、こういったLisp属言語で  
本格的なアプリケーションを作る  
ましてやビジネスアプリを作る  
ということは今ではなくなってしまった  

ワシがたまに使うアプリでは  
-  emacs(大魔術師が好む多機能エディタ)  
-  maxma（数学好きが好む数式処理）  

ぐらいしか思いつかない  

じゃあ、なんでLispをすすめるのか？

それは、自分好みの言語を作れる、という感覚  
やりたいことに特化した言語をつくれる、という感覚   
関数=データという感覚  
を得られるからである  

昔々、Sunワークステーション用に  
図面管理のアプリケーションを書いたことがある  
そのとき、膨大な数の画面処理を作る必要があった  
しかも、一人で作ることになった  
もちろんCで書くわけだが、  
物理的にそれを一人で書くには  
奇跡でも起こさない限り不可能だった  
画面処理の基本的な雛形をCで書くことはできたが  
ビジネスロジックやDB連携の部分を実装するのに  
莫大な工数が予想された  

そこで思いついたのがLispである  
自分でLisp処理系をCで実装し、  
必要な関数、ViewロジックやDB連携関数を  
Lispインタプリターで呼び出すようにすればよいのでは？  

なぜLispなのかというと    
1000行前後でLispインタプリターを書くことができたからだ  
いろいろなLisp処理系のサンプルをかき集め  
自分だけのLisp方言は数日で完成した  
画面の基本的な部品、
ツリーやファイラー、グリッド系の画面処理は  
もちろんCで実装し、  
それをオレオレLispに次々に組み込んだ  
ビジネスロジック関数をDB連携を埋め込んでみたら  
基本的なCRUD処理はまたたく間に実装ができた  
アプリケーションは仕様が決定しだい瞬時に実装することができた  
小さな奇跡が起こったのだ

これがLisp処理系でなかったら  
PerlやBasicのような言語処理系だったら
構文木は複雑になり  
構文解析の実装にyacc/lexなどを使うことになっただろう  
そうなれば、言語処理系だけで数ヶ月かかっただろうと思う

この経験を通して  
「言語は自分で作れる」という不思議な自身を得た  
それと、LISPの不思議な言語仕様に触れて  
いままでの言語感覚が別次元に移行したのを感じた  
いまにして思えば、  
これこそ、LISPが恩寵として与えてくれた悟りなんだろうと思う

Lispという概念は  
常に形をかえながら時代とともに存在しつづけている  
だから、時として新たな実装を生む  
  
JAVA系列ではJVM上で動くClojure  
Python系列ではHy  
これらは、豊富なライブラリを使うことができるLispなのだ  
特にClojureはJAVAの特性を活かせるので  
無限の可能性を秘めている  
プログラミング界隈ではClojureはかなり注目株である  
  
Lispは概念である  
魔法使いの弟子たちよ  
暇があって何もすることがないなら  
ちょっとでいいからこの古代語を学んでみよう 
Lispがなぜ今でも光を放っているかを感じるだろう  
Lispは細部に宿るのだ   


